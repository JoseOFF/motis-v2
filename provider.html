<!DOCTYPE html>
<html lang="es">
<head>
    <title>Simulador de bajo</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="assets/img/logo.png" type="image/png">
    <!-- Estilos y librerías -->
    <link rel="stylesheet" href="css/sweet-alert.css">
    <link rel="stylesheet" href="css/material-design-iconic-font.min.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>
    <script src="js/modernizr.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/sweet-alert.min.js"></script>
    <style>



        /* Estilos generales del simulador */
        body {
            font-family: sans-serif;
            background: #111;
            color: rgb(122, 108, 108);
            margin: 0;
            padding: 0;
        }

        h1 {
            padding-top: 20px;
        }

        /* Estilos para cada cuerda del bajo */
        #fretboard, #fretboardA, #fretboardD, #fretboardG {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            padding: 20px;
            margin-top: 20px;
        }

        /* Botones de los trastes */
        button.fret {
            background-color: #333;
            color: white;
            border: 2px solid #e01b46;
            border-radius: 8px;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            min-width: 100px;
            margin-right: 10px;
            transition: background 0.2s;
            flex: 0 0 auto;
        }

        button.fret:hover {
            background-color: #cc6060;
        }

        /* Scrollbar personalizada */
        #fretboard::-webkit-scrollbar {
            height: 10px;
        }

        #fretboard::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }

        #fretboard::-webkit-scrollbar-track {
            background: #111;
        }
    </style>
</head>


<body>
    <!-- Menú lateral -->
    <div class="navbar-lateral full-reset">
        <div class="visible-xs font-movile-menu mobile-menu-button"></div>
        <div class="full-reset container-menu-movile nav-lateral-scroll">
            <div class="logo full-reset all-tittles">
                <i class="visible-xs zmdi zmdi-close pull-left mobile-menu-button" style="line-height: 55px; cursor: pointer; padding: 0 10px; margin-left: 7px;"></i> 
                PlayBass!
            </div>
            <div class="nav-lateral-divider full-reset"></div>
            <div class="full-reset" style="padding: 10px 0; color:#fff;">
                <figure>
                    <img src="assets/img/logo.png" alt="Biblioteca" class="img-responsive center-box" style="width:55%;">
                </figure>
                <p class="text-center" style="padding-top: 15px;">Menú de PlayBass!</p>
            </div>
            <div class="nav-lateral-divider full-reset"></div>
            <div class="full-reset nav-lateral-list-menu">
                <ul class="list-unstyled">
                    <li><a href="home.html"><i class="zmdi zmdi-home zmdi-hc-fw"></i>&nbsp;&nbsp; Inicio</a></li>
                    <li>
                        <div class="dropdown-menu-button"><i class="zmdi zmdi-assignment-o zmdi-hc-fw"></i>&nbsp;&nbsp; Aprende +<i class="zmdi zmdi-chevron-down pull-right zmdi-hc-fw icon-sub-menu"></i></div>
                        <ul class="list-unstyled">
                            <li><a href="https://www.songsterr.com/"><i class="zmdi zmdi-book zmdi-hc-fw"></i>&nbsp;&nbsp; Biblioteca de canciones</a></li>
                            <li><a href="catalog.html"><i class="zmdi zmdi-bookmark-outline zmdi-hc-fw"></i>&nbsp;&nbsp; ¿Eres nuevo en esto?</a></li>
                        </ul>
                    </li>
                    <li>
                        <div class="dropdown-menu-button"><i class="zmdi zmdi-case zmdi-hc-fw"></i>&nbsp;&nbsp; Servicios <i class="zmdi zmdi-chevron-down pull-right zmdi-hc-fw icon-sub-menu"></i></div>
                        <ul class="list-unstyled">
                            <li><a href="institution.html"><i class="zmdi zmdi-balance zmdi-hc-fw"></i>&nbsp;&nbsp; Reconocimiento de notas</a></li>
                            <li><a href="provider.html"><i class="zmdi zmdi-truck zmdi-hc-fw"></i>&nbsp;&nbsp; Simulador de bajo</a></li>
                        </ul>
                    </li>
                    <li>
                        <div class="dropdown-menu-button"><i class="zmdi zmdi-account-add zmdi-hc-fw"></i>&nbsp;&nbsp; Foro y comunidad <i class="zmdi zmdi-chevron-down pull-right zmdi-hc-fw icon-sub-menu"></i></div>
                        <ul class="list-unstyled">
                            <li><a href="vibass.html"><i class="zmdi zmdi-face zmdi-hc-fw"></i>&nbsp;&nbsp; ViBass</a></li>
                        </ul>
                    </li>
                    <li><a href="advancesettings.html"><i class="zmdi zmdi-wrench zmdi-hc-fw"></i>&nbsp;&nbsp; Configuraciones avanzadas</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="content-page-container full-reset custom-scroll-containers">
        <nav class="navbar-user-top full-reset">
            <ul class="list-unstyled full-reset">
                <figure>
                    <img src="assets/img/user01.png" alt="user-picture" class="img-responsive img-circle center-box">
                </figure>
                 <!-- Nombre de usuario estático -->
                <li style="color:#fff; cursor:default;">
                    <span class="all-tittles" id="nombreUsuario">Admin Name</span>
                </li>
                <li class="tooltips-general exit-system-button" data-href="index.html" data-placement="bottom" title="Salir del sistema">
                    <i class="zmdi zmdi-power"></i>
                </li>
                <li class="tooltips-general btn-help" data-placement="bottom" title="Ayuda">
                    <i class="zmdi zmdi-help-outline zmdi-hc-fw"></i>
                </li>
                <li class="mobile-menu-button visible-xs" style="float: left !important;">
                    <i class="zmdi zmdi-menu"></i>
                </li>
                <li class="desktop-menu-button hidden-xs" style="float: left !important;">
                    <i class="zmdi zmdi-swap"></i>
                </li>
            </ul>
        </nav>

        <div class="container">
            <div class="page-header">
                <h1 class="all-tittles">Simulador <small>de bajo</small></h1>
            </div>

            <!-- Cuerdas del bajo -->
            <div id="fretboard"></div>
            <div id="fretboardA"></div>
            <div id="fretboardD"></div>
            <div id="fretboardG"></div>

            <!-- Asistente de IA -->
            <div id="feed"></div>
            <script src="https://cdn.botpress.cloud/webchat/v2.4/inject.js"></script>
            <script src="https://files.bpcontent.cloud/2025/05/22/22/20250522223936-92WAM02X.js"></script>

            <!-- Script para generar trastes -->


            <!-- Solo el script que reemplaza tu función playNote y mejora la generación dinámica -->
<script>
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  // Frecuencia de las notas al aire de cada cuerda (E, A, D, G)
  const openStringFreqs = {
    E: 41.203,  // E1
    A: 55.0,    // A1
    D: 73.416,  // D2
    G: 98.0     // G2
  };

  // Fórmula para calcular la frecuencia de la nota en un traste específico:
  // f = f0 * 2^(n/12), donde n = número de trastes desde la cuerda al aire
  function getFreq(string, fret) {
    return openStringFreqs[string] * Math.pow(2, fret / 12);
  }

  function playNote(string, fret) {
    const freq = getFreq(string, fret);

    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    const filter = audioCtx.createBiquadFilter();

    osc.type = "triangle"; // Otras opciones: sine, square, sawtooth
    osc.frequency.value = freq;

    gain.gain.setValueAtTime(0, audioCtx.currentTime);
    gain.gain.linearRampToValueAtTime(0.4, audioCtx.currentTime + 0.05);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 1);

    filter.type = "lowpass";
    filter.frequency.value = 800;

    osc.connect(filter);
    filter.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 1.2);
  }

  // Reemplazar el código que genera los botones para usar esta función
  const strings = ['E', 'A', 'D', 'G'];

  strings.forEach(str => {
    const container = document.getElementById(`fretboard${str === 'E' ? '' : str}`);
    for (let fret = 0; fret <= 24; fret++) {
      const button = document.createElement('button');
      button.className = 'fret';
      button.innerText = `Traste ${fret}`;
      button.onclick = () => playNote(str, fret);
      container.appendChild(button);
    }
  });

   // Código para manejar sesión y mostrar usuario en la interfaz
document.addEventListener('DOMContentLoaded', () => {
  // Obtener datos de usuario guardados en localStorage
  const usuario = JSON.parse(localStorage.getItem('usuario'));
  if (!usuario) {
    // Si no hay usuario logueado, redirigir a index (login)
    window.location.href = 'index.html';
    return;
  }

  // Cambiar solo el nombre mostrado del usuario en el menú superior
  const nombreElem = document.getElementById('nombreUsuario');
  if (nombreElem) {
    nombreElem.textContent = usuario.nombre_usuario || 'Usuario';
  }

  // Botón para cerrar sesión y borrar datos de usuario en localStorage
  const logoutBtn = document.querySelector('.exit-system-button');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('usuario');
      window.location.href = 'index.html';
    });
  }
});
</script>

            
            
        </div>

        <!-- Modal de ayuda -->
        <div class="modal fade" tabindex="-1" role="dialog" id="ModalHelp">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title text-center all-tittles">Ayuda del sistema</h4>
                    </div>
                    <div class="modal-body">
                        Aquí puedes simular cada traste del bajo y escuchar su sonido. Haz clic en cualquier traste de cualquier cuerda para escuchar cómo suena.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">
                            <i class="zmdi zmdi-thumb-up"></i> &nbsp; De acuerdo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer full-reset">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-12 col-sm-6">
                        <h4 class="all-tittles">Acerca de</h4>
                        <p>
                            PlayBass es una plataforma para aprender y practicar el bajo eléctrico. Ofrece herramientas interactivas, una biblioteca de canciones y una comunidad donde puedes compartir tu progreso y conectar con otros músicos.
                        </p>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <h4 class="all-tittles">Desarrollador</h4>
                        <ul class="list-unstyled">
                            <li>
                                <i class="zmdi zmdi-check zmdi-hc-fw"></i>&nbsp; © Team Wicho
                                <i class="zmdi zmdi-facebook zmdi-hc-fw footer-social"></i>
                                <i class="zmdi zmdi-twitter zmdi-hc-fw footer-social"></i>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright full-reset all-tittles">© Team Wicho</div>
        </footer>
    </div>
</body>
</html>
